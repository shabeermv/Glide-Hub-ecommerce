<%-include("../../views/partials/users/header.ejs")%>

<body>
    <div class="page-wrapper">
        <main class="main">
        	<div class="page-header text-center" style="background-image: url('/asset3/images/page-header-bg.jpg')">
        		<div class="container">
        			<h1 class="page-title">My Account<span>Shop</span></h1>
        		</div><!-- End .container -->
        	</div><!-- End .page-header -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                        <li class="breadcrumb-item"><a href="#">Shop</a></li>
                        <li class="breadcrumb-item active" aria-current="page">My Account</li>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->

            <div class="page-content">
            	<div class="dashboard">
	                <div class="container">
	                	<div class="row">
	                		<aside class="col-md-4 col-lg-3">
	                			<ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
								    <li class="nav-item">
								        <a class="nav-link active" id="tab-dashboard-link" data-toggle="tab" href="#tab-dashboard" role="tab" aria-controls="tab-dashboard" aria-selected="true">Dashboard</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-orders-link" data-toggle="tab" href="#tab-orders" role="tab" aria-controls="tab-orders" aria-selected="false">Orders</a>
								    </li>
								    <li class="nav-item">
                                        <a class="nav-link" id="tab-wallet-link" data-toggle="tab" href="#tab-wallet" role="tab" aria-controls="tab-wallet" aria-selected="false">Wallet</a>
                                    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address" role="tab" aria-controls="tab-address" aria-selected="false">Adresses</a>
								    </li>
                                    <li class="nav-item">
								        <a class="nav-link" id="tab-coupons-link" data-toggle="tab" href="#tab-coupons" role="tab" aria-controls="tab-coupons" aria-selected="false">Coupons & Offers</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" href="/logout">Sign Out</a>
								    </li>
								</ul>
	                		</aside><!-- End .col-lg-3 -->

	                		<div class="col-md-8 col-lg-9">
	                			<div class="tab-content">
                                    <!-- Dashboard Tab -->
                                    <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel" aria-labelledby="tab-dashboard-link">
                                        <div style="margin-top: 30px;">
                                            <!-- My Cart Button -->
                                            <a href="/cart" class="btn btn-success" style="margin-right: 10px;">
                                                My Cart
                                            </a>
                                            <!-- My Wishlist Button -->
                                            <a href="/wishlist" class="btn btn-primary"style="margin-right: 10px;">
                                                My Wishlist
                                            </a>
                                            <a href="/resetPassword" class="btn btn-secondary">
                                                Reset Password
                                            </a>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <a href="/shop" class="btn btn-outline-primary-2"><span>GO SHOP</span><i class="icon-long-arrow-right"></i></a>
                                        </div>
                                    </div><!-- End .tab-pane -->

                                    <!-- Orders Tab -->
                                    <div class="tab-pane fade" id="tab-orders" role="tabpanel" aria-labelledby="tab-orders-link">
                                        <div class="container">
                                            <h3 class="mb-4">Your Orders</h3>
                                            <% if (orders && orders.length > 0) { %>
                                                <div class="table-responsive">
                                                    <table class="table table-bordered table-hover">
                                                        <thead class="thead-dark">
                                                            <tr>
                                                                <th>Order ID</th>
                                                                <th>Date</th>
                                                                <th>Products</th>
                                                                <th>Total Amount</th>
                                                                <th>Status</th>
                                                                <th style="width: 200px;">Actions</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <% orders.forEach(order => { %>
                                                                <tr>
                                                                    <td><%= order.orderId %></td>
                                                                    <td><%= new Date(order.createdAt).toLocaleDateString() %></td>
                                                                    <td>
                                                                        <ul class="list-unstyled mb-0">
                                                                            <% order.products.forEach(product => { %>
                                                                                <li class="mb-1">
                                                                                    <%= product.productId ? product.productId.title : 'Product Not Found' %>
                                                                                </li>
                                                                            <% }) %>
                                                                        </ul>
                                                                    </td>
                                                                    <td>
                                                                        <strong><%= order.totalAmount %></strong>
                                                                    </td>
                                                                    <td>
                                                                        <span class="badge badge-<%= 
                                                                            order.orderStatus === 'Completed' ? 'success' : 
                                                                            order.orderStatus === 'Shipped' ? 'primary' : 
                                                                            order.orderStatus === 'Pending' ? 'warning' : 
                                                                            order.orderStatus === 'Cancelled' ? 'danger' : 'info' 
                                                                        %> p-2">
                                                                            <%= order.orderStatus %>
                                                                        </span>
                                                                    </td>
                                                                    <td class="text-center">
                                                                        <div class="btn-group" role="group">
                                                                            <a href="/order/details/<%= order._id %>" class="btn btn-sm btn-info" style="margin-right: 5px;">
                                                                                View Details
                                                                            </a>
                                                                            
                                                                            <% if (order.orderStatus !== 'Cancelled' && order.orderStatus !== 'Completed') { %>
                                                                                <button class="btn btn-sm btn-danger cancel-order-btn"
                                                                                        data-order-id="<%= order._id %>">
                                                                                    Cancel Order
                                                                                </button>
                                                                            <% } %>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            <% }) %>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            <% } else { %>
                                                <div class="alert alert-info">
                                                    <p class="mb-0">You haven't placed any orders yet.</p>
                                                </div>
                                            <% } %>
                                        </div>
                                    </div><!-- End .tab-pane -->

                                    <!-- Wallet Tab -->
                                    <div class="tab-pane fade" id="tab-wallet" role="tabpanel" aria-labelledby="tab-wallet-link">
                                        <div class="container">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="card card-dashboard">
                                                        <div class="card-body">
                                                            <h3 class="card-title">Wallet Balance</h3>
                                                            <div class="wallet-balance-section mb-4">
                                                                <h2 class="text-primary">₹<%= user.wallet ? user.wallet.toFixed(2) : '0.00' %></h2>
                                                                <p class="text-muted">Available Balance</p>
                                                            </div>

                                                            <div class="wallet-actions mb-4">
                                                                <button class="btn btn-primary mr-2" data-toggle="modal" data-target="#addMoneyModal">
                                                                    <i class="icon-plus"></i> Add Money
                                                                </button>
                                                                <button class="btn btn-outline-primary" data-toggle="modal" data-target="#withdrawModal">
                                                                    <i class="icon-minus"></i> Withdraw
                                                                </button>
                                                            </div>

                                                            <div class="wallet-transactions">
                                                                <h4 class="mb-3">Recent Transactions</h4>
                                                                <% if (user.walletTransactions && user.walletTransactions.length > 0) { %>
                                                                    <div class="table-responsive">
                                                                        <table class="table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th>Date</th>
                                                                                    <th>Type</th>
                                                                                    <th>Amount</th>
                                                                                    <th>Status</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <% user.walletTransactions.forEach(transaction => { %>
                                                                                    <tr>
                                                                                        <td><%= new Date(transaction.date).toLocaleDateString() %></td>
                                                                                        <td><%= transaction.type %></td>
                                                                                        <td class="<%= transaction.type === 'credit' ? 'text-success' : 'text-danger' %>">
                                                                                            <%= transaction.type === 'credit' ? '+' : '-' %>$<%= transaction.amount.toFixed(2) %>
                                                                                        </td>
                                                                                        <td>
                                                                                            <span class="badge badge-<%= transaction.status === 'completed' ? 'success' : 'warning' %>">
                                                                                                <%= transaction.status %>
                                                                                            </span>
                                                                                        </td>
                                                                                    </tr>
                                                                                <% }); %>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                <% } else { %>
                                                                    <div class="alert alert-info">
                                                                        No transactions yet.
                                                                    </div>
                                                                <% } %>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div><!-- End .tab-pane -->

                                    <!-- Address Tab -->
                                    <div class="tab-pane fade" id="tab-address" role="tabpanel" aria-labelledby="tab-address-link">
                                        <p>The following addresses will be used on the checkout page by default.</p>
                                        <div class="row">
                                            <% user.address.forEach(function(address, index) { %>
                                                <div class="col-lg-6">
                                                    <div class="card card-dashboard">
                                                        <div class="card-body">
                                                            <h3 class="card-title">Address <%= index + 1 %></h3>
                                                            <br>
                                                            <p>
                                                                <%= user.username %><br>
                                                                <%= user.contact %><br>
                                                                <%= user.email %><br>
                                                                <%= address.address %><br>
                                                                <%= address.city %><br>
                                                                <%= address.state %><br>
                                                                <%= address.postCode %><br>
                                                                <%= address.country %><br>
                                                                <a href="/editProfile/<%= address._id %>">Edit <i class="icon-edit"></i></a>
                                                                <button type="submit" class="btn btn-danger" data-address-id="<%= address._id %>">Delete</button>
                                                            </p>
                                                        </div><!-- End .card-body -->
                                                    </div><!-- End .card-dashboard -->
                                                </div><!-- End .col-lg-6 -->
                                            <% }); %>
                                        </div>
                                        <div class="col-12">
                                            <a href="javascript:void(0)" id="showAddressForm" class="btn btn-outline-primary-2 mt-4">
                                                <span>ADD NEW ADDRESS</span>
                                                <i class="icon-plus"></i>
                                            </a>
                                        </div>
                                        
                                        <div id="addressFormContainer" class="mt-4">
                                            <form action="#" id="colorfulAddressForm" style="background: #ffffff; padding: 40px; border-radius: 12px; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2); width: 100%; max-width: 600px; margin-top: 40px;">
                                                <h2 style="text-align: center; color: #3a3b3d; margin-bottom: 20px;">Add Address</h2>
                                        
                                                <label for="fullName" style="color: #343a40; font-weight: bold;">Full Name *</label>
                                                <input type="text" id="fullName" name="fullName" class="form-control" style="width: 100%; border: 2px solid #3a3b3d; margin-bottom: 20px; border-radius: 5px; padding: 20px; font-size: 1.1rem;">
                                        
                                                <label for="address" style="color: #343a40; font-weight: bold;">Address *</label>
                                                <input type="text" id="address" name="address" class="form-control" style="width: 100%; border: 2px solid #3a3b3d; margin-bottom: 20px; border-radius: 5px; padding: 20px; font-size: 1.1rem;">
                                        
                                                <label for="city" style="color: #343a40; font-weight: bold;">City *</label>
                                                <input type="text" id="city" name="city" class="form-control" style="width: 100%; border: 2px solid #3a3b3d; margin-bottom: 20px; border-radius: 5px; padding: 20px; font-size: 1.1rem;">
                                        
                                                <label for="state" style="color: #343a40; font-weight: bold;">State *</label>
                                                <input type="text" id="state" name="state" class="form-control" style="width: 100%; border: 2px solid #3a3b3d; margin-bottom: 20px; border-radius: 5px; padding: 20px; font-size: 1.1rem;">
                                        
                                                <label for="postCode" style="color: #3a3b3d; font-weight: bold;">Post Code *</label>
                                                <input type="text" id="postCode" name="postCode" class="form-control" style="width: 100%; border: 2px solid #3a3b3d; margin-bottom: 20px; border-radius: 5px; padding: 20px; font-size: 1.1rem;">
                                        
                                                <label for="country" style="color: #3a3b3d; font-weight: bold;">Country *</label>
                                                <input type="text" id="country" name="country" class="form-control" style="width: 100%; border: 2px solid #3a3b3d; margin-bottom: 20px; border-radius: 5px; padding: 20px; font-size: 1.1rem;">
                                        
                                                <button id="confirm" type="submit" class="btn btn-block" style="background-color: #3a3b3d; color: #fff; font-weight: bold; padding: 15px; border-radius: 8px; width: 100%; font-size: 1.2rem;">
                                                    SAVE CHANGES
                                                </button>
                                        
                                                <div id="response-message" class="mt-3" style="text-align: center;"></div>
                                            </form>
                                        </div>
                                    </div><!-- End .tab-pane -->
                                    
                                    <!-- Coupons & Offers Tab -->
                                    <div class="tab-pane fade" id="tab-coupons" role="tabpanel" aria-labelledby="tab-coupons-link">
                                        <div class="container">
                                            <h3 class="mb-4">Your Coupons & Offers</h3>
                                            <div class="alert alert-info">
                                                <p class="mb-0">You don't have any active coupons or offers at the moment.</p>
                                            </div>
                                        </div>
                                    </div><!-- End .tab-pane -->
                                </div><!-- End .tab-content -->
	                		</div><!-- End .col-lg-9 -->
	                	</div><!-- End .row -->
	                </div><!-- End .container -->
                </div><!-- End .dashboard -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

        <!-- Add Money Modal -->
        <div class="modal fade" id="addMoneyModal" tabindex="-1" role="dialog" aria-labelledby="addMoneyModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addMoneyModalLabel">Add Money to Wallet</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form id="addMoneyForm" action="/wallet/add-money" method="POST">
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="amount">Amount ($)</label>
                                <input type="number" class="form-control" id="amount" name="amount" min="1" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="paymentMethod">Payment Method</label>
                                <select class="form-control" id="paymentMethod" name="paymentMethod" required>
                                    <option value="card">Credit/Debit Card</option>
                                    <option value="bank">Bank Transfer</option>
                                </select>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Add Money</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Withdraw Modal -->
        <div class="modal fade" id="withdrawModal" tabindex="-1" role="dialog" aria-labelledby="withdrawModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="withdrawModalLabel">Withdraw Money</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <form id="withdrawForm" action="/wallet/withdraw" method="POST">
                        <div class="modal-body">
                            <div class="form-group">
                                <label for="withdrawAmount">Amount ($)</label>
                                <input type="number" class="form-control" id="withdrawAmount" name="amount" min="1" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="withdrawMethod">Withdrawal Method</label>
                                <select class="form-control" id="withdrawMethod" name="withdrawMethod" required>
                                    <option value="bank">Bank Account</option>
                                    <option value="card">Credit/Debit Card</option>
                                </select>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Withdraw</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Order Details Modal -->
        <div class="modal fade" id="orderDetailsModal" tabindex="-1" role="dialog" aria-labelledby="orderDetailsModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="orderDetailsModalLabel">Order Details</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" id="orderDetailsContent">
                        <!-- Content will be dynamically loaded here -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div id="successModal" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Success</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p id="modalMessage">Address added successfully!</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <style>
            /* Wallet styles */
            .wallet-balance-section {
                background-color: #f8f9fa;
                padding: 20px;
                border-radius: 8px;
                text-align: center;
            }
            
            .wallet-balance-section h2 {
                font-size: 2.5rem;
                margin-bottom: 5px;
            }
            
            .wallet-actions {
                text-align: center;
            }
            
            .wallet-transactions {
                margin-top: 30px;
            }
            
            /* Table styles */
            .table td, .table th {
                vertical-align: middle;
            }
            
            .table thead th {
                background-color: #f8f9fa;
                border-bottom: 2px solid #dee2e6;
            }
            
            .badge {
                font-size: 0.9rem;
                padding: 8px 12px;
            }
            
            .btn-group .btn {
                padding: 0.5rem 1rem;
                font-size: 0.875rem;
            }
            
            /* Modal styles */
            .modal-dialog {
                max-width: 600px;
                margin: 30px auto;
            }
            
            .modal-content {
                width: 100%;
            }
            
            .modal-lg {
                max-width: 800px;
            }
        </style>
<!-- End .row -->
                                        


                                            <!-- End .col-lg-6 -->
                                            
								    
                                    <!-- .End .tab-pane -->
								</div>
	                		</div><!-- End .col-lg-9 -->
	                	</div><!-- End .row -->
	                </div><!-- End .container -->
                </div><!-- End .dashboard -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

       <!-- End .modal -->

    <!-- Plugins JS File -->
    <script src="/asset3/js/jquery.min.js"></script>
    <script src="/asset3/js/bootstrap.bundle.min.js"></script>
    <script src="/asset3/js/jquery.hoverIntent.min.js"></script>
    <script src="/asset3/js/jquery.waypoints.min.js"></script>
    <script src="/asset3/js/superfish.min.js"></script>
    <script src="/asset3/js/owl.carousel.min.js"></script>
    <!-- Main JS File -->
    <script src="/asset3/js/main.js"></script>
 

    <script>
        // Select the button and form
        const showAddressFormButton = document.getElementById('showAddressForm');
        const addressForm = document.getElementById('addressForm');
    
        // Add an event listener to the button
        showAddressFormButton.addEventListener('click', function () {
            // Toggle the display of the address form
            if (addressForm.style.display === 'none') {
                addressForm.style.display = 'flex';
            } else {
                addressForm.style.display = 'none';
            }
        });
    </script>
    

    <script>
       // Add click event listeners to all cancel order buttons
       document.querySelectorAll('.view-details-btn').forEach(button => {
    button.addEventListener('click', async function() {
        const orderId = this.getAttribute('data-order-id');
        try {
            const response = await fetch(`/order-details/${orderId}`);
            const data = await response.json();
            
            if (data.success) {
                // Populate modal with order details
                document.getElementById('orderDetailsContent').innerHTML = `
                    <div class="order-details">
                        <h6>Order ID: ${data.order.orderId}</h6>
                        <p>Date: ${new Date(data.order.createdAt).toLocaleDateString()}</p>
                        <p>Status: ${data.order.orderStatus}</p>
                        <hr>
                        <h6>Products:</h6>
                        <ul>
                            ${data.order.products.map(product => `
                                <li>${product.productId.title} - Quantity: ${product.quantity}</li>
                            `).join('')}
                        </ul>
                        <hr>
                        <p><strong>Total Amount: $${data.order.totalAmount.toFixed(2)}</strong></p>
                    </div>
                `;
                
                $('#orderDetailsModal').modal('show');
            } else {
                alert('Failed to load order details');
            }
        } catch (error) {
            console.error('Error loading order details:', error);
            alert('An error occurred while loading order details');
        }
    });
});

// Keep the existing cancel order functionality
document.querySelectorAll('.cancel-order-btn').forEach(button => {
    button.addEventListener('click', async function() {
        const orderId = this.getAttribute('data-order-id');
        
        if (confirm('Are you sure you want to cancel this order?')) {
            try {
                const response = await fetch(`/cancelOrder/${orderId}`, {
                    method: 'DELETE',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                const result = await response.json();

                if (result.success) {
                    alert('Order cancelled successfully!');
                    window.location.reload();
                } else {
                    alert(result.message || 'Failed to cancel order');
                }
            } catch (error) {
                console.error('Error cancelling order:', error);
                alert('An error occurred while cancelling the order');
            }
        }
    });
});
    


document.getElementById('colorfulAddressForm').addEventListener('submit', async function (event) {
    event.preventDefault(); // Prevent the default form submission

    // Collect form data
    const address = {
        fullName: document.querySelector('[name="fullName"]').value,
        address: document.querySelector('[name="address"]').value,
        city: document.querySelector('[name="city"]').value,
        state: document.querySelector('[name="state"]').value,
        postCode: document.querySelector('[name="postCode"]').value,
        country: document.querySelector('[name="country"]').value,
    };

    try {
        // Send the data to the backend using fetch
        const response = await fetch('/accountDetails', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(address), // Send the address object as a JSON string
        });

        // Handle the response
        const result = await response.json();

        const messageElement = document.getElementById('response-message');
        if (response.ok && result.success) {
            messageElement.textContent = result.message || 'Changes saved successfully!';
            messageElement.style.color = 'green';

            // Show the success modal
            showModal(result.message || 'Address added successfully!');
        } else {
            messageElement.textContent = result.message || 'Failed to save changes.';
            messageElement.style.color = 'red';
        }
    } catch (error) {
        const messageElement = document.getElementById('response-message');
        messageElement.textContent = error.message || 'An unexpected error occurred.';
        messageElement.style.color = 'red';
        console.error('Fetch error:', error);
    }
});


function showModal(message) {
    document.getElementById('modalMessage').textContent = message;
    $('#successModal').modal('show');
}



function showModal(message) {
    
    document.getElementById('modalMessage').textContent = message;

    
    $('#successModal').modal('show');
}


 
document.querySelectorAll('.btn-danger').forEach(button => {
    button.addEventListener('click', function(e) {
        e.preventDefault();

        
        const addressId = button.getAttribute('data-address-id');

        console.log(addressId, 'address id');

        
        fetch(`/deleteAddress/${addressId}`, {
            method: "DELETE",
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                console.log('Address deleted successfully');
                
                window.location.reload();
            } else {
                alert('Error deleting address: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error deleting address:', error);
            alert('Error deleting address: ' + error.message);
        });
    });
});

 </script>
    
        
    
    <%-include("../../views/partials/users/footer.ejs")%>


